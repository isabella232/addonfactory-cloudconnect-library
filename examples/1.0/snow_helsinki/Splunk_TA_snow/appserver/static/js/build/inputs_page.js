webpackJsonp([2],{0:function(t,e,i){var n,s;n=[i("shim/jquery"),i("require/backbone"),i("splunkjs/mvc/headerview"),i(179),i(178),i(109)],s=function(t,e,n,s,a,o){var c=a.generatePublicPath,h=o.configManager,l=function(){var e=h.unifiedConfig,a=e&&e.name;i.p=c(a||"Splunk_TA_crowdstrike"),new n({id:"header",section:"dashboards",el:t(".preload"),acceleratedAppNav:!0}).render(),document.title="Inputs";var o=new s;o.render(),t(".addonContainer").html(o.el)};h.init(l)}.apply(e,n),!(void 0!==s&&(t.exports=s))},179:function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}var s,a,o=i(109),c=i(135),h=i(114),l=i(180),r=i(138),p=n(r);s=[i("shim/jquery"),i(110),i("require/backbone"),i(137),i(181),i("views/shared/tablecaption/Master"),i(182),i(184),i(168),i(165)],a=function(t,e,i,n,s,a,r,d,u,g){return i.View.extend({className:"inputsContainer",initialize:function(t){var n=this;this.unifiedConfig=o.configManager.unifiedConfig,this.inputsPageTemplateData={},this.inputsPageTemplateData.title=this.unifiedConfig.pages.inputs.title,this.inputsPageTemplateData.description=this.unifiedConfig.pages.inputs.description,this.inputsPageTemplateData.singleInput=1===this.unifiedConfig.pages.inputs.services.length,this.inputsPageTemplateData.buttonText=(0,h.getFormattedMessage)(100),this.addonName=this.unifiedConfig.meta.name,this.stateModel=new i.Model,this.stateModel.set({sortKey:"name",sortDirection:"asc",count:10,offset:0,fetching:!0}),this.services=this.unifiedConfig.pages.inputs.services,this.filterKey=[],e.each(this.services,function(t){return e.each(t.entity,function(t){n.filterKey.indexOf(t.field)<0&&n.filterKey.push(t.field)})}),e.each(this.services,function(t){p.default[t.name]?n[t.name]=(0,c.generateCollection)("",{endpointUrl:p.default[t.name]}):n[t.name]=(0,c.generateCollection)(t.name)}),this.dispatcher=e.extend({},i.Events),this.listenTo(this.dispatcher,"filter-change",function(t){this.filterChange(t,this.stateModel)}.bind(this)),this.listenTo(this.dispatcher,"delete-input",function(){var t=this.fetchAllCollection();t.done(function(){var t,i=this.stateModel.get("offset"),n=this.stateModel.get("count");this.cachedInputs=this.combineCollection(),this.cachedSearchInputs=this.combineCollection(),this.inputs.paging.set("offset",i),this.inputs.paging.set("perPage",n),this.inputs.paging.set("total",this.cachedSearchInputs.length),t=this.cachedSearchInputs.models.slice(i,i+n),e.each(t,function(t){t.paging.set("offset",i),t.paging.set("perPage",n),t.paging.set("total",this.cachedSearchInputs.length)}.bind(this)),this.inputs.reset(t),this.inputs._url=void 0}.bind(this))}.bind(this)),this.listenTo(this.dispatcher,"add-input",function(){var t=this.fetchAllCollection();t.done(function(){var t,i=this.stateModel.get("offset"),n=this.stateModel.get("count");this.cachedInputs=this.combineCollection(),this.cachedSearchInputs=this.combineCollection(),this.inputs.paging.set("offset",i),this.inputs.paging.set("perPage",n),this.inputs.paging.set("total",this.cachedSearchInputs.length),t=this.cachedSearchInputs.models.slice(i,i+n),e.each(t,function(t){t.paging.set("offset",i),t.paging.set("perPage",n),t.paging.set("total",this.cachedSearchInputs.length)}.bind(this)),this.inputs.reset(t),this.inputs._url=void 0}.bind(this))}.bind(this)),this.listenTo(this.stateModel,"change:sortDirection change:sortKey",e.debounce(function(){void 0===this.inputs._url?this.sortCollection(this.stateModel):this.fetchListCollection(this.inputs,this.stateModel)}.bind(this),0)),this.listenTo(this.stateModel,"change:search",e.debounce(function(){void 0===this.inputs._url?this.searchCollection(this.stateModel):this.fetchListCollection(this.inputs,this.stateModel)}.bind(this),0)),this.listenTo(this.stateModel,"change:offset",e.debounce(function(){void 0===this.inputs._url?this.pageCollection(this.stateModel):this.fetchListCollection(this.inputs,this.stateModel)}.bind(this),0)),this.deferred=this.fetchAllCollection(),this.filter=new r({dispatcher:this.dispatcher,services:this.services}),this.emptySearchString=this.filterKey.map(function(t){return t+"=*"}).join(" OR ")},filterChange:function(t,i){i.set("offset",0,{silent:!0});var n,s,a,o=this.stateModel.get("search");"all"===t?void 0!==o&&o!==this.emptySearchString?(this.searchCollection(this.stateModel),this.inputs._url=void 0):(n=this.fetchAllCollection(),n.done(function(){var t=this.stateModel.get("offset"),i=this.stateModel.get("count");this.cachedInputs=this.combineCollection(),this.cachedSearchInputs=this.combineCollection(),this.inputs.paging.set("offset",t),this.inputs.paging.set("perPage",i),this.inputs.paging.set("total",this.cachedSearchInputs.length),s=this.cachedSearchInputs.models.slice(t,t+i),e.each(s,function(e){e.paging.set("offset",t),e.paging.set("perPage",i),e.paging.set("total",this.cachedSearchInputs.length)}.bind(this)),this.inputs.reset(s),this.inputs._url=void 0}.bind(this))):(a=this.fetchListCollection(this[t],this.stateModel),a.done(function(){var e=this.services.find(function(e){return e.name===t});p.default[e.name]?this.inputs.model=(0,c.generateModel)("",{endpointUrl:p.default[e.name]}):this.inputs.model=(0,c.generateModel)(e.name),this.inputs._url=this[t]._url,this.inputs.reset(this[t].models);var i=this.stateModel.get("offset"),n=this.stateModel.get("count");this.inputs.paging.set("offset",i),this.inputs.paging.set("perPage",n),this.inputs.paging.set("total",this[t].paging.get("total"))}.bind(this)))},render:function(){var i=this;this.deferred.done(function(){i.stateModel.set("fetching",!1),i.cachedInputs=i.combineCollection(),i.cachedSearchInputs=i.combineCollection(),i.inputs=i.combineCollection(),i.inputs.models=i.cachedInputs.models.slice(0,i.stateModel.get("count")),0!==i.inputs.length&&e.each(i.inputs.models,function(t){return t.paging.set("total",i.inputs.length)}),i.inputs.paging.set("total",i.inputs.length),i.caption=new a({countLabel:e(i.unifiedConfig.pages.inputs.title).t(),model:{state:i.stateModel},collection:i.inputs,noFilterButtons:!0,filterKey:i.filterKey}),i.inputTable=new g({stateModel:i.stateModel,collection:i.inputs,dispatcher:i.dispatcher,enableBulkActions:!1,showActions:!0,enableMoreInfo:!0,component:i.unifiedConfig.pages.inputs}),i.$el.append(e.template(s)(i.inputsPageTemplateData)),i.$el.append(i.caption.render().$el),i.inputsPageTemplateData.singleInput||t(".table-caption-inner").append(i.filter.render().$el),i.$el.append(i.inputTable.render().$el),i.inputsPageTemplateData.singleInput?i.$("#addInputBtn").on("click",function(){var e=new u({el:t(".dialog-placeholder"),collection:i.inputs,component:i.unifiedConfig.pages.inputs.services[0],isInput:!0}).render();e.modal()}):i.$("#addInputBtn").on("click",function(e){var n=t(e.currentTarget);return i.editmenu&&i.editmenu.shown?(i.editmenu.hide(),void e.preventDefault()):(i.editmenu=new d({collection:i.inputs,dispatcher:i.dispatcher,services:i.unifiedConfig.pages.inputs.services}),t("body").append(i.editmenu.render().el),void i.editmenu.show(n))})})},fetchAllCollection:function(){var n=this,s=new i.Model({sortKey:"name",sortDirection:"asc",count:100,offset:0,fetching:!0}),a=e.map(this.services,function(t){return n.fetchListCollection(n[t.name],s)});return t.when.apply(this,a)},combineCollection:function(){var t=this,i=(0,c.generateCollection)();return e.each(this.services,function(e){i.add(t[e.name].models,{silent:!0})}),i},fetchListCollection:function(t,e){var i="",n="";return e.get("search")&&(n=e.get("search"),i=n.substring(n.indexOf("*")+1,n.indexOf("*",n.indexOf("*")+1)).toLowerCase(),t._url.indexOf("ta_crowdstrike_falcon_host_inputs")>-1&&"falcon host".indexOf(i)>-1&&(n=this.emptySearchString),"disabled".indexOf(i)>-1?n+=' OR (disabled="*1*")':"enabled".indexOf(i)>-1&&(n+=' OR (disabled="*0*")')),e.set("fetching",!0),t.fetch({data:{sort_dir:e.get("sortDirection"),sort_key:e.get("sortKey"),search:n,count:e.get("count"),offset:e.get("offset")},success:function(){e.set("fetching",!1)}.bind(this)})},searchCollection:function(t){var n,s,a=this,o=t.get("search"),c=[],h=t.get("search"),l=this.stateModel.get("offset"),r=this.stateModel.get("count");if(o!==this.emptySearchString){o=h.substring(h.indexOf("*")+1,h.indexOf("*",h.indexOf("*")+1)).toLowerCase(),c=this.cachedInputs.models.filter(function(t){return a.filterKey.some(function(e){var i=t.entry.get(e)&&t.entry.get(e).toLowerCase()||void 0,n=t.entry.content.get(e)&&t.entry.content.get(e).toLowerCase()||void 0;return i&&i.indexOf(o)>-1||n&&n.indexOf(o)>-1})}),this.inputs.paging.set("offset",l),this.inputs.paging.set("perPage",r),this.inputs.paging.set("total",c.length),e.each(c,function(t){t.paging.set("offset",l),t.paging.set("perPage",r),t.paging.set("total",c.length)}.bind(this)),this.cachedSearchInputs.reset(c);var p=new i.Model({sortKey:"name",sortDirection:"asc",count:10,offset:0,fetching:!0});this.pageCollection(p)}else n=this.fetchAllCollection(),n.done(function(){this.cachedInputs=this.combineCollection(),this.cachedSearchInputs=this.combineCollection(),this.inputs.paging.set("offset",l),this.inputs.paging.set("perPage",r),this.inputs.paging.set("total",this.cachedSearchInputs.length),s=this.cachedSearchInputs.models.slice(l,l+r),e.each(s,function(t){t.paging.set("offset",l),t.paging.set("perPage",r),t.paging.set("total",this.cachedSearchInputs.length)}.bind(this)),this.inputs.reset(s),this.inputs._url=void 0,this.stateModel.get("search")!==this.emptySearchString&&this.searchCollection(this.stateModel)}.bind(this))},pageCollection:function(t){var i,n=t.get("offset"),s=t.get("count");this.inputs.paging.set("offset",n),this.inputs.paging.set("perPage",s),this.inputs.paging.set("total",this.cachedSearchInputs.length),i=this.cachedSearchInputs.models.slice(n,n+s),e.each(i,function(t){t.paging.set("offset",n),t.paging.set("perPage",s),t.paging.set("total",this.cachedSearchInputs.length)}.bind(this)),this.inputs.reset(i)},sortCollection:function(t){var i=t.get("sortDirection"),n=t.get("sortKey"),s=this.fetchAllCollection(),a=t.get("offset"),o=t.get("count"),c=function(t,e){return(0,l.sortAlphabetical)(t.entry.get(n)||t.entry.content.get(n),e.entry.get(n)||e.entry.content.get(n),i)};s.done(function(){this.cachedInputs=this.combineCollection(),this.cachedSearchInputs=this.combineCollection(),this.inputs.paging.set("offset",a),this.inputs.paging.set("perPage",o),this.inputs.paging.set("total",this.cachedSearchInputs.length),this.cachedSearchInputs.models.sort(c);var t=this.cachedSearchInputs.models.slice(a,a+o);e.each(t,function(t){t.paging.set("offset",a),t.paging.set("perPage",o),t.paging.set("total",this.cachedSearchInputs.length)}.bind(this)),this.inputs.reset(t),this.inputs._url=void 0}.bind(this))}})}.apply(e,s),!(void 0!==a&&(t.exports=a))},180:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.sortAlphabetical=function(t,e,i){t=t?t:"",e=e?e:"";var n=t<e?-1:t>e?1:0;return"asc"===i?n:-n},e.sortNumerical=function(t,e,i){t=t?t:0,e=e?e:0;var n=t<e?-1:t>e?1:0;return"asc"===i?n:-n}},181:function(t,e){t.exports='<div class ="tool-bar">\n    <div class ="tool-title"><%- _(title).t() %></div>\n    <div class = "tool-button">\n        <div class="dropdown add-button">\n            <button id="addInputBtn" class="btn btn-primary" type="button">\n                <%- _(buttonText).t() %>\n                <% if (!singleInput) { %>\n                    <span class="caret"></span>\n                <% } %>\n            </button>\n        </div>\n    </div>\n    <div class= "tool-description">\n        <%- _(description).t() %>\n    </div>\n</div>\n<hr>\n'},182:function(t,e,i){var n,s,a=i(114);n=[i("shim/jquery"),i(110),i("require/backbone"),i(183)],s=function(t,e,i,n){return i.View.extend({className:"type-filter",events:{"mousedown a.dropdown-toggle":function(t){this.filter(t)},"keydown a.dropdown-toggle":function(t){13===t.which&&(this.filter(t),t.preventDefault())},"click a.dropdown-toggle":function(t){t.preventDefault()}},initialize:function(t){this.dispatcher=t.dispatcher,this.services=t.services,this.dispatcher.on("filter-change",function(t){this.changeType(t)}.bind(this)),this.inputFilterLabel=(0,a.getFormattedMessage)(106)},render:function(){return this.$el.html(e.template(this.template)({inputFilterLabel:this.inputFilterLabel})),this},changeType:function(i){var n=this.services.find(function(t){return t.name===i});this.$("a.dropdown-toggle").empty(),"all"===i?this.$("a.dropdown-toggle").append(e.template('<%- _("All").t() %>')):this.$("a.dropdown-toggle").append(e.template(e(n.title).t())),this.$("a.dropdown-toggle").append(t('<span class="caret"></span>'))},filter:function(e){var i=t(e.currentTarget);return this.inputFilter&&this.inputFilter.shown?(this.inputFilter.hide(),void e.preventDefault()):(this.inputFilter=new n({dispatcher:this.dispatcher,services:this.services}),t("body").append(this.inputFilter.render().el),void this.inputFilter.show(i))},template:'\n            <%- inputFilterLabel %> :\n            <a class="dropdown-toggle" href="#">\n                <%- _("All").t() %><span class="caret"></span>\n            </a>\n        '})}.apply(e,n),!(void 0!==s&&(t.exports=s))},183:function(t,e,i){var n,s;n=[i("shim/jquery"),i(110),i("views/shared/PopTart")],s=function(t,e,i){return i.extend({className:"dropdown-menu",events:{"click a":"changeFilter"},initialize:function(t){i.prototype.initialize.apply(this,arguments),this.dispatcher=t.dispatcher,this.services=t.services},render:function(){var t='<ul class="first-group"><li><a href="#" class="all"><%- _("All").t() %></a></li></ul><ul class="second-group">';return e.each(this.services,function(i){t+='<li><a href="#" class="'+i.name+'">'+e(i.title).t()+"</a></li>"}),t+="</ul>",this.el.innerHTML=i.prototype.template_menu,this.$el.append(e.template(t)),this.$el.addClass("dropdown-menu-narrow"),this},changeFilter:function(e){this.hide();var i=t(e.target).attr("class");this.dispatcher.trigger("filter-change",i)}})}.apply(e,n),!(void 0!==s&&(t.exports=s))},184:function(t,e,i){var n,s;n=[i(110),i("shim/jquery"),i(137),i("views/shared/PopTart"),i(168)],s=function(t,e,i,n,s){return n.extend({className:"dropdown-menu",initialize:function(e){t.bindAll(this,"create"),n.prototype.initialize.apply(this,arguments),this.collection=e.collection,this.dispatcher=e.dispatcher,this.services=e.services},events:{"click a":"create"},render:function(){var e,i='<ul class="first-group">';for(e in this.services)this.services.hasOwnProperty(e)&&(i+='<li><a href="#" class="'+e+'">'+t(this.services[e].title).t()+"</a></li>");return i+="</ul>",this.el.innerHTML=n.prototype.template_menu,this.$el.append(i),this.$el.addClass("dropdown-menu-narrow"),this},create:function(t){this.serviceType=e(t.target).attr("class");var i=new s({el:e(".dialog-placeholder"),collection:this.collection,component:this.services[this.serviceType],isInput:!0}).render();i.modal(),this.hide()}})}.apply(e,n),!(void 0!==s&&(t.exports=s))}});